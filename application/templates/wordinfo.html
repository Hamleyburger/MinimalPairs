{% extends "layout.html" %}
{% from 'macros.html' import pair_card, word_card_buttons with context %}
{% from 'MOmacro.html' import MOmacro with context %}

{% block title %}
{{ title_wordinfo }}'{{ word.word }}'
{% endblock %}

{% block submeta %}
<!-- page specific tags -->
<meta name="description" content="'{{ word.word }}': {{ wordinfo.description }}" />

<!-- page specific open graph -->
<meta property="og:description" content="{{ wordinfo.og_description }}'{{ word.word }}'" />
<meta property="og:image"
    content="{{ url_for('static', filename='images/thumbnails/' + word.image.name, _external=True)}}">
<meta property=" og:image:secure_url"
    content="{{ url_for('static', filename='images/thumbnails/' + word.image.name, _external=True)}}">
<meta property="og:image:alt" content="{{ wordinfo.og_image_alt }}" />
<meta property="og:title" content="{{ wordinfo.og_title }}'{{ word.word }}'" />
<meta property="og:url"
    content="{{ url_for('user_blueprint.wordinfo', locale=session.locale, word_id=word.id, _external=True) }}" />
<link rel="canonical"
    href="{{ url_for('user_blueprint.wordinfo', locale=session.locale, word_id=word.id, _external=True) }}" />


<meta property="og:image:width" content="{{ wordinfo.og_image_width }}" />
<meta property="og:image:height" content="{{ wordinfo.og_image_height }}" />
{% endblock %}

{% block main %}


<div class="word-font container-fluid word-info-container">
    <div class="row outer-row justify-content-sm-center justify-content-xl-between">
        <div class="col-xl-5">
            <div class="row inner-row justify-content-center">


                <div class="col-xl-6 order-xl-0 col-md-5 col-sm-5 col-8 cols-word text-center">
                    <div class="word1-img-div shadow">
                        <img class="wordinfo-image"
                            src="{{ url_for('static', filename='images/thumbnails/' + word.image.name)}}"
                            alt="image for the word '{{ word.word }}'">
                    </div>
                    {{ word_card_buttons(word, infobutton=false) }}

                </div>
                <div class="col-xl-6 col-0"></div>
                <div class="col-xl-6 order-xl-12 col-md-5 col-sm-8 cols-word align-self-xl-end text-center">
                    <div class="title align-self-end">

                        <h1>{{ word.word }}</h1>
                        <p>
                            "{{word.cue}}"
                        </p>
                    </div>
                </div>
                <div class="col-xl-6 order-xl-12 col-0"></div>
            </div>
        </div>

        <script> var pairCount = 0;</script>
        {% for pairList in pairLists %}
        <script> var pairCount = pairCount + 1;</script>
        {% endfor %}


        <div class="col-12 col-xl-7 col-pairs mt-5 mt-xl-0 shadow">

            <div class="slider owl-carousel owl-theme">
                {% for pairList in pairLists %}
                {{ pair_card(pairList) }}
                {% endfor %}
            </div>
        </div>

    </div>



    <div class="row MO-row shadow outer-row justify-content-center mb-5">

        {% for MOset in MOsets %}
        <div class="MO-col col">
            {{ MOmacro(MOset, loop.index) }}

        </div>
        {% endfor %}

    </div>

</div>



















{% endblock %}




{% block script %}

<script>
    console.log(pairCount);
    var loop = true;
    var responsiveClass = true;

    var owl = $(".slider");
    owl.owlCarousel({
        autoplay: true,
        loop: loop,
        autoplayTimeout: 6000,
        autoplayHoverpause: true,
        responsiveClass: responsiveClass,
        smartSpeed: 2000,
        dotsEach: true,
        //dots: true,


        responsive: {
            0: {
                items: getItems(2),
                loop: getLoop(2)
            },

            460: {
                items: getItems(3),
                loop: getLoop(3)


            },
            1000: {
                items: getItems(3),
                loop: getLoop(3)
            },


        },
    });

    function getItems(items) {
        console.log("calculating items")
        if (pairCount < items) {
            return pairCount;
        }
        else {
            return items;
        }
    }
    function getLoop(items) {
        console.log("calculating loop")
        if (pairCount < items) {
            return false;
        }
        else {
            return true;
        }
    }

</script>

{% endblock %}